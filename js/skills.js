var grid = [

        "PHP", "⚫ ⚫ ⚫ ⚫", "", -4.5, 1,
        "JAVASCRIPT", "⚫ ⚫ ⚫", "", -4.5, 2,
        "SQL", "⚫ ⚫ ⚫ ⚫", "", -4.5, 3,
        "C", "⚫", "", -4.5, 4,
        "BRIGHTSCRIPT", "⚫ ⚫ ⚫ ⚫", "", -4.5, 5,
        "PYTHON", "⚫", "", -4.5, 6,
        "BASH", "⚫ ⚫", "", -4.5, 7,
        "CQL", "⚫ ⚫ ⚫", "", -4.5, 8,

        "MYSQL", "⚫ ⚫ ⚫ ⚫", "", -0.5, 1,
        "REDIS", "⚫ ⚫ ⚫", "", -0.5, 2,
        "MONGODB", "⚫ ⚫ ⚫", "", -0.5, 3,
        "CASSANDRA", "⚫ ⚫ ⚫ ⚫", "", -0.5, 4,
        "RABBITMQ", "⚫", "", -0.5, 5,
        "ELASTICSEARCH", "⚫ ⚫ ⚫", "", -0.5, 6,
        "ORM", "⚫ ⚫", "", -0.5, 7,
        "PDO", "⚫ ⚫ ⚫", "", -0.5, 8,

        "HTML5", "⚫ ⚫", "", 3.5, 1,
        "CSS3", "⚫ ⚫", "", 3.5, 2,
        "BOOTSTRAP", "⚫ ⚫ ⚫ ⚫", "", 3.5, 3,
        "HTML", "⚫ ⚫ ⚫ ⚫ ⚫", "", 3.5, 4,
        "CSS", "⚫ ⚫ ⚫ ⚫ ⚫", "", 3.5, 5,
        "RESPONSIVE UI", "⚫ ⚫ ⚫ ⚫", "", 3.5, 6,
        "XML", "⚫ ⚫ ⚫ ⚫", "", 3.5, 7,
        "JSON", "⚫ ⚫ ⚫ ⚫ ⚫", "", 3.5, 8,

        "CRON JOBS", "⚫ ⚫ ⚫ ⚫", "", 7.5, 1,
        "CORDOVA", "⚫ ⚫ ⚫", "", 7.5, 2,
        "CODEIGNITER", "⚫ ⚫ ⚫", "", 7.5, 3,
        "SYMFONY", "⚫", "", 7.5, 4,
        "SCENEGRAPH", "⚫ ⚫ ⚫ ⚫", "", 7.5, 5,
        "AMAZON S3", "⚫ ⚫ ⚫", "", 7.5, 6,
        "WORDPRESS", "⚫", "", 7.5, 7,
        "PHPMAILER", "⚫ ⚫ ⚫", "", 7.5, 8,

        "NODEJS", "⚫ ⚫ ⚫ ⚫", "", 11.5, 1,
        "EXPRESSJS", "⚫ ⚫ ⚫", "",11.5, 2,
        "METEORJS", "⚫ ⚫ ⚫", "", 11.5, 3,
        "NPM", "⚫ ⚫ ⚫", "", 11.5, 4,
        "ANGULARJS", "⚫ ⚫ ⚫", "", 11.5, 5,
        "JQUERY", "⚫ ⚫ ⚫ ⚫", "", 11.5, 6,
        "MOMENTJS", "⚫ ⚫ ⚫", "", 11.5, 7,
        "CHARTJS", "⚫ ⚫ ⚫ ⚫", "", 11.5, 8,

        "SSH", "⚫ ⚫ ⚫", "", 15.5, 1,
        "COMPOSER", "⚫ ⚫ ⚫", "",15.5, 2,
        "CURL", "⚫ ⚫ ⚫ ⚫", "", 15.5, 3,
        "REGEX", "⚫ ⚫", "", 15.5, 4,
        "REST", "⚫ ⚫ ⚫ ⚫", "", 15.5, 5,
        "AJAX", "⚫ ⚫ ⚫ ⚫", "", 15.5, 6,
        "MVC", "⚫ ⚫ ⚫ ⚫", "", 15.5, 7,
        "OOPS", "⚫ ⚫ ⚫ ⚫", "", 15.5, 8,

        "GIT", "⚫ ⚫ ⚫ ⚫", "", 19.5, 1,
        "MERCURIAL", "⚫ ⚫ ⚫ ⚫", "",19.5, 2,
        "PAYPAL", "⚫ ⚫ ⚫ ⚫", "", 19.5, 3,
        "ATOM/SUBLIME", "⚫ ⚫ ⚫ ⚫", "", 19.5, 4,
        "POSTMAN", "⚫ ⚫ ⚫ ⚫", "", 19.5, 5,
        "SEO", "⚫ ⚫ ⚫ ⚫", "", 19.5, 6,
        "OPEN GRAPH", "⚫ ⚫ ⚫ ⚫", "", 19.5, 7,
        "SCHEMA MARKUP", "⚫ ⚫ ⚫", "", 19.5, 8,

        "UBUNTU", "⚫ ⚫ ⚫ ⚫", "", 23.5, 1,
        "CENTOS", "⚫ ⚫ ⚫ ⚫", "",23.5, 2,
        "LAMP", "⚫ ⚫ ⚫ ⚫ ⚫", "", 23.5, 3,
        "MEAN", "⚫ ⚫ ⚫ ⚫", "", 23.5, 4,
        "HEROKU", "⚫ ⚫ ⚫ ⚫ ⚫", "", 23.5, 5,
        "FILEZILLA", "⚫ ⚫ ⚫ ⚫ ⚫ ", "", 23.5, 6,
        "INKSCAPE", "⚫ ⚫ ⚫", "", 23.5, 7,
        "FIREBUG", "⚫ ⚫ ⚫ ⚫", "", 23.5, 8,

];

var camera, scene, renderer;
var controls;

var objects = [];
var targets = { grid: [], disperse: [] };

init();
animate();

function init() {

        camera = new THREE.PerspectiveCamera( 40, window.innerWidth / window.innerHeight, 1, 10000 );
        var current_width = $(window).width();
        console.log(current_width);


        if(current_width == 1920)
        {
                camera.position.z = 4000;
        }
        else if(current_width == 1680)
        {
                camera.position.z = 4000;
        }
        else if(current_width == 1600)
        {
                camera.position.z = 4000;
        }
        else if(current_width == 1440)
        {
                camera.position.z = 4000;
        }
        else if(current_width = 1336)
        {
                camera.position.z = 4000;
        }
        else if(current_width == 1280)
        {
                camera.position.z = 5500;
        }
        else if(current_width == 1152)
        {
                camera.position.z = 6000;
        }
        else if(current_width = 1024)
        {
                camera.position.z = 7000;
        }
        else if (current_width == 768)
        {
                camera.position.z = 8000;
        }
        else
        {
                camera.position.z = 4000;
        }

        scene = new THREE.Scene();

        // grid
        console.log(current_width);
        for ( var i = 0; i < grid.length; i += 5 ) {

                var skill = document.createElement( 'div' );
                skill.className = 'skill';
                // var r = Math.floor(Math.random() * (255 - 0+1)) + 1;
                // var g = Math.floor(Math.random() * (255 - 0+1)) + 1;
                // var b = Math.floor(Math.random() * (255 - 0+1)) + 1;
                //
                // skill.style.backgroundColor = 'rgba('+r+','+g+','+b+','+ ( Math.random() * 0.5 + 0.25 ) + ')';

                skill.style.backgroundColor = 'rgba(0,127,127,' + ( Math.random() * 0.5 + 0.25 ) + ')';

                var symbol = document.createElement( 'div' );
                symbol.className = 'symbol';
                symbol.textContent = grid[ i ];
                skill.appendChild( symbol );

                var details = document.createElement( 'div' );
                details.className = 'details';
                details.innerHTML = grid[ i + 1 ] + '<br>' + grid[ i + 2 ];
                skill.appendChild( details );

                var object = new THREE.CSS3DObject( skill );
                object.position.x = Math.random() * 4000 - 2000;
                object.position.y = Math.random() * 4000 - 2000;
                object.position.z = Math.random() * 4000 - 2000;
                scene.add( object );

                objects.push( object );

                //

                var object = new THREE.Object3D();
                object.position.x = ( grid[ i + 3 ] * 140 ) - 1330;
                object.position.y = - ( grid[ i + 4 ] * 180 ) + 990;

                targets.grid.push( object );

        }


        // disperse

        for ( var i = 0; i < objects.length; i ++ ) {

                var object = new THREE.Object3D();

                object.position.x = Math.floor( Math.random() * 2000 - 1000);
                object.position.y = Math.floor( Math.random() * 1800 - 800) + 1;
                object.position.z = Math.floor(Math.random() * 4000 - 2000) + 1;
                console.log(object.position);
                targets.disperse.push( object );

        }

        //

        renderer = new THREE.CSS3DRenderer();
        renderer.setSize( window.innerWidth*.99, window.innerHeight);
        console.log(window.innerWidth);
        renderer.domElement.style.position = 'absolute';
        document.getElementById( 'container' ).appendChild( renderer.domElement );

        //

        controls = new THREE.TrackballControls( camera, renderer.domskill );
        controls.rotateSpeed = .6;
        controls.minDistance = 500;
        controls.maxDistance = 10000;
        controls.addEventListener( 'change', render );

        var button = document.getElementById( 'grid' );
        button.addEventListener( 'click', function ( event ) {

                transform( targets.grid, 2000 );

        }, false );


        var button = document.getElementById( 'disperse' );
        button.addEventListener( 'click', function ( event ) {

                transform( targets.disperse, 2000 );

        }, false );

        transform( targets.grid, 2000 );

        //

        // window.addEventListener( 'resize', onWindowResize,true );



}

function transform( targets, duration ) {

        TWEEN.removeAll();

        for ( var i = 0; i < objects.length; i ++ ) {

                var object = objects[ i ];
                var target = targets[ i ];

                new TWEEN.Tween( object.position )
                        .to( { x: target.position.x, y: target.position.y, z: target.position.z }, Math.random() * duration + duration )
                        .easing( TWEEN.Easing.Exponential.InOut )
                        .start();

                new TWEEN.Tween( object.rotation )
                        .to( { x: target.rotation.x, y: target.rotation.y, z: target.rotation.z }, Math.random() * duration + duration )
                        .easing( TWEEN.Easing.Exponential.InOut )
                        .start();

        }

        new TWEEN.Tween( this )
                .to( {}, duration * 2 )
                .onUpdate( render )
                .start();

}

function onWindowResize() {

        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();

        renderer.setSize( window.innerWidth, window.innerHeight );

        render();

}

function animate() {

        requestAnimationFrame( animate );

        TWEEN.update();

        controls.update();

}

function render() {

        renderer.render( scene, camera );

}
